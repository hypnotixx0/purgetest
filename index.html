<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="assets/e1bc9dd5-25b2-4626-9afc-694f3188bac0.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>/Purge</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="tooltip.css">
    <link rel="stylesheet" href="themes-widget.css">
    <link rel="stylesheet" href="tab-manager.css">
    <link rel="stylesheet" href="quick-stats.css">
    <link rel="stylesheet" href="achievements.css">
    <link rel="stylesheet" href="achievements-display.css">
    <link rel="stylesheet" href="page-transitions.css">
    <link rel="stylesheet" href="fullscreen-indicator.css">
    <link rel="stylesheet" href="premium-chat.css">
    <link rel="stylesheet" href="admin.css">
    <style>
        /* Add these styles for the unlocked state */
        .category-box.unlocked {
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: 0 15px 40px var(--glow-color, rgba(139, 92, 246, 0.4));
        }
        
        .category-box.unlocked .box-glow {
            opacity: 1;
            animation: unlockedGlow 2s ease-in-out infinite;
        }
        
        .category-box.unlocked .category-icon {
            animation: iconFloat 3s ease-in-out infinite;
        }
        
        @keyframes unlockedGlow {
            0%, 100% { 
                box-shadow: 
                    inset 0 0 0 1px rgba(139, 92, 246, 0.3),
                    0 0 30px rgba(139, 92, 246, 0.3);
            }
            50% { 
                box-shadow: 
                    inset 0 0 0 1px rgba(139, 92, 246, 0.6),
                    0 0 50px rgba(139, 92, 246, 0.6);
            }
        }
        
        @keyframes iconFloat {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.1); }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner">
                <div class="spinner-circle"></div>
            </div>
            <h2 class="loading-title">Loading your best experience...</h2>
            <p class="loading-subtitle">Preparing /Purge for you</p>
            <div class="loading-progress">
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Announcement Modal -->
    <div id="announcement-modal" class="announcement-modal">
        <div class="announcement-content">
            <div class="announcement-header">
                <h1 class="announcement-title">Welcome to /Purge</h1>
                <p class="announcement-subtitle">Enjoy maximum security</p>
            </div>
            
            <div class="announcement-body">
                <p>Thanks for checking /Purge! Here's our newest announcements</p>
                
                <div style="text-align: left; margin: 1.5rem 0;">
                    <p>üéÆ <strong>Latest Updates:</strong></p>
                    <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                        <li>New games</li>
                        <li>Themes are gas</li>
                        <li>Consistent bug fixing</li>
                        <li>Ts just fire all around</li>
                    </ul>
                </div>
                
                <p>Remember to join our Discord for updates, support, and community chat!</p>
            </div>
            
            <div class="announcement-footer">
                <div class="announcement-author">
                    <img src="pfp.jpg" alt="unhiin" class="author-avatar" onerror="this.style.display='none'">
                    <div class="author-info">
                        <div class="author-name">unhiin</div>
                        <div class="author-role">The Goat</div>
                    </div>
                </div>
                
                <button id="announcement-ok-btn" class="announcement-ok-btn">
                    <i class="fas fa-check"></i>
                    Let's Go!
                </button>
            </div>
        </div>
    </div>

    <!-- Background -->
    <div class="background"></div>

    <!-- Themes Widget (replaces canvas) -->
    <div id="canvas-container"></div>

    <!-- Main Content -->
    <div class="container">
        <h1 id="title">/Purge</h1>
        <p class="subtitle">Unblocked games and tools</p>
        
        <!-- Stats & Credits Row -->
        <div class="stats-row">
            <!-- Games Counter -->
            <div class="quick-stats" id="quick-stats">
                <div class="stat-card">
                    <div class="stat-icon">üéÆ</div>
                    <div class="stat-content">
                        <div class="stat-value" id="total-games-stat">0</div>
                        <div class="stat-label">Games</div>
                    </div>
                </div>
            </div>
            
            <!-- Credits Box -->
            <a href="credits.html" class="credits-stat-box" title="View Credits">
                <div class="credits-stat-icon">‚≠ê</div>
                <div class="credits-stat-content">
                    <div class="credits-stat-value">Team</div>
                    <div class="credits-stat-label">Credits</div>
                </div>
            </a>
        </div>
        
        <!-- Category Boxes -->
        <div class="categories">
            <a href="games.html" class="category-box" id="games-box">
                <div class="category-icon">üéÆ</div>
                <h3>Games</h3>
                <p>Play hundreds of unblocked games</p>
                <div class="box-glow"></div>
            </a>
            
            <a href="apps.html" class="category-box" id="apps-box">
                <div class="category-icon">üì±</div>
                <h3>Apps</h3>
                <p>Useful Applications</p>
                <div class="box-glow"></div>
            </a>
            
            <a href="tools.html" class="category-box" id="tools-box">
                <div class="category-icon">üõ†Ô∏è</div>
                <h3>Tools</h3>
                <p>Utilities and productivity tools</p>
                <div class="box-glow"></div>
            </a>

            <a href="roadmap.html" class="category-box" id="roadmap-box">
                <div class="category-icon">üó∫Ô∏è</div>
                <h3>Roadmap</h3>
                <p>Keep up with expected updates</p>
                <div class="box-glow"></div>
            </a>
        </div>
    </div>

    <!-- Discord Popup -->
    <div id="popup" class="popup">
        <div class="popup-content">
            <h2>Join Our Community! üíú</h2>
            <p>Get access to more links, updates, and chat with other users!</p>
            <div class="popup-buttons">
                <a href="https://discord.gg/bS7Xgvyuu5" target="_blank" class="btn btn-primary">
                    <i class="fab fa-discord"></i>
                    Join Discord
                </a>
                <button id="close-popup" class="btn btn-secondary">
                    Maybe Later
                </button>
            </div>
        </div>
    </div>

    <!-- Settings Link -->
    <div class="settings-link" onclick="window.location.href='settings.html'" title="Settings">
        <i class="fas fa-cog"></i>
    </div>
    <div class="chat-link" onclick="document.getElementById('under-modal').classList.add('active')" title="Premium Chat">
        <i class="fas fa-comments"></i>
    </div>

    <!-- Admin Floating Icon -->
    <a class="admin-floating" href="admin.html" title="Admin Console (unhiindev)">
        <i class="fas fa-tools"></i>
    </a>

    <!-- Under Construction Modal for Chat -->
    <div id="under-modal" class="under-modal" onclick="if(event.target===this)this.classList.remove('active')">
        <div class="under-card">
            <h2><i class="fas fa-wrench"></i> Chat Under Construction</h2>
            <p>We are working on the backend portion of chat to make sure it's reliable and persistent for everyone. Thanks for your patience.</p>
            <div class="under-actions">
                <button class="btn btn-secondary" onclick="document.getElementById('under-modal').classList.remove('active')">Close</button>
                <a class="btn btn-primary" href="settings.html"><i class="fas fa-cog"></i> Settings</a>
            </div>
        </div>
    </div>

    <!-- Discord Button -->
    <button id="discord-btn" class="discord-btn">
        <i class="fab fa-discord"></i>
        Join Discord
    </button>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 /Purge. Anyone posing as this site that isnt unhiin is false.</p>
    </footer>

    <!-- Purge Authentication Overlay -->
    <div id="purge-auth-overlay" class="purge-auth-overlay">
        <div class="auth-container">
            <!-- Welcome Section -->
            <div class="welcome-section active">
                <div class="welcome-content">
                    <h1 class="welcome-title">
                        <span class="welcome-text">Welcome to</span>
                        <span class="purge-glow">/purge</span>
                    </h1>
                    <p class="welcome-subtitle">Enter your key to begin</p>
                    <div class="scroll-indicator">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </div>

            <!-- Key Entry Section -->
            <div class="key-section">
                <div class="key-content">
                    <h2 class="key-title">Access Key Required</h2>
                    <p class="key-description">Enter your premium key to access all content</p>
                    
                    <div class="key-input-wrapper">
                        <div class="key-input-group">
                            <input type="password" id="auth-key-input" class="auth-key-input" placeholder="Enter your key..." autocomplete="off">
                            <button id="auth-show-key" class="auth-show-key-btn">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="key-hints">
                            <div class="key-hint">
                                <i class="fas fa-key"></i>
                                <span>Free key: <code>IMPOOR</code> (Games only)</span>
                            </div>
                            <div class="key-hint">
                                <i class="fas fa-crown"></i>
                                <span>Premium keys unlock all content</span>
                            </div>
                        </div>
                    </div>

                    <div id="auth-status" class="auth-status"></div>

                    <div class="auth-buttons">
                        <button id="auth-submit" class="auth-submit-btn">
                            <i class="fas fa-lock-open"></i>
                            <span>Unlock Access</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts - FIXED ORDER -->
    <script src="loading-fix.js"></script>
    <script src="auth-system-fixed.js"></script> <!-- CHANGED: Fixed auth system -->
    
    <!-- Your existing scripts -->
    <script src="debug.js"></script>
    <script src="utils.js"></script>
    <script src="title.js"></script>
    <script src="discord.js"></script>
    <script src="description.js"></script>
    <script src="tab-cloaking.js"></script>
    <script src="theme-manager.js"></script>
    <script src="themes-widget.js"></script>
    <script src="snow.js"></script>
    <script src="tooltip-manager.js"></script>
    <script src="keyboard-shortcuts.js"></script>
    <script src="keyboard-shortcuts-enhanced.js"></script>
    <script src="recent-games.js"></script>
    <script src="game-stats.js"></script>
    <script src="search-history.js"></script>
    <script src="help-modal.js"></script>
    <script src="back-to-top.js"></script>
    <script src="accessibility.js"></script>
    <script src="tab-manager.js"></script>
    <script src="games.js"></script>
    <script src="achievements.js"></script>
    <script src="achievements-display.js"></script>
    <script src="quick-stats.js"></script>
    <script src="browser-info.js"></script>
    <script src="page-transitions.js"></script>
    <script src="fullscreen-indicator.js"></script>
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>

    <script src="premium-chat.js"></script>
    <script src="announcement.js"></script>
    
    <script>
        // Test keys in console
        console.log('üîë Test keys available:');
        console.log('- Free: IMPOOR');
        console.log('- Premium: CHARLESISPOOR, UNHIIN, SOSAPARTY');
        console.log('üí° Type checkAuth() to see current session');
    </script>
</body>
</html>